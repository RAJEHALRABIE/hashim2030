<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <title>متابع حافز ثرايف - تتبع الشروط والأداء</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#020617" />
    
    <meta name="description" content="تطبيق ويب خفيف ومحسّن لتتبع وتحليل شروط الحافز الأسبوعي لشركة ثرايف (أوبر/كريم) بدقة وبشكل لحظي.">
    
    <link rel="manifest" href="manifest.webmanifest" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div id="app">
      <header class="app-header">
        <div class="header-main">
          <div class="header-left">
            <div class="app-logo">ثرايف حافز</div>
            <div id="current-day-info" class="week-range"></div>
            <div id="current-week-range" class="week-range"></div>
          </div>
          <button id="new-week-btn" class="btn btn-ghost small">أسبوع جديد</button>
        </div>
        <div class="header-meta">
          <div class="pill pill-accept">
            قبول
            <span id="header-accept-rate">0%</span>
          </div>
          <div class="pill pill-cancel">
            إلغاء
            <span id="header-cancel-rate">0%</span>
          </div>
        </div>
      </header>

      <main class="app-main">
        <section id="screen-home" class="screen active">
          </section>

        <section id="screen-trips" class="screen">
          </section>

        <section id="screen-wallet" class="screen">
          </section>

        <section id="screen-settings" class="screen">
          </section>

        <section id="screen-report" class="screen">
          </section>
      </main>

      <nav class="bottom-nav">
        </nav>
    </div>

    <div id="modal-backdrop" class="modal-backdrop hidden">
      <div class="modal-card">
        <div class="modal-icon" id="modal-icon">ℹ️</div>
        <h2 id="modal-title" class="modal-title">عنوان</h2>
        <p id="modal-message" class="modal-message"></p>
        <div id="modal-actions-info" class="modal-actions">
          <button id="modal-close-btn" class="btn btn-primary full">حسناً</button>
        </div>
        <div id="modal-actions-confirm" class="modal-actions hidden">
          <button id="modal-confirm-yes" class="btn btn-danger full">نعم، متأكد</button>
          <button id="modal-confirm-no" class="btn btn-ghost full">إلغاء</button>
        </div>
      </div>
    </div>

    <div id="end-trip-sheet-backdrop" class="sheet-backdrop hidden">
      <div class="sheet-panel">
        <header class="sheet-header">
          <div>
            <h3 class="sheet-title">إنهاء الرحلة</h3>
            <p id="sheet-trip-info" class="sheet-subtitle">
              تحقّق من بيانات الرحلة قبل حفظها في المتابع.
            </p>
          </div>
          <button id="sheet-close-btn" class="icon-btn" aria-label="إغلاق">✕</button>
        </header>

        <div class="sheet-section">
          <p class="sheet-section-label">طريقة الدفع</p>
          <div class="pay-type-row">
            <button class="pay-type-btn active" data-pay-type="cash">كاش فقط</button>
            <button class="pay-type-btn" data-pay-type="card">بطاقة فقط</button>
            <button class="pay-type-btn" data-pay-type="mixed">مختلطة</button>
          </div>
        </div>

        <div class="sheet-section">
          <p class="sheet-section-label">قيم الرحلة</p>
          <div class="sheet-inputs">
            <label class="sheet-input-group">
              <span>قيمة الرحلة (الإجمالي)</span>
              <input id="sheet-fare-input" type="text" inputmode="decimal" autocomplete="off" readonly />
            </label>
            <label class="sheet-input-group" id="sheet-cash-group">
              <span>الكاش المستلم</span>
              <input id="sheet-cash-input" type="text" inputmode="decimal" autocomplete="off" readonly />
            </label>
          </div>
        </div>

        <div class="sheet-section">
          <p class="sheet-section-label">لوحة الأرقام</p>
          <div id="sheet-keypad" class="keypad">
            <button data-key="1">1</button>
            <button data-key="2">2</button>
            <button data-key="3">3</button>

            <button data-key="4">4</button>
            <button data-key="5">5</button>
            <button data-key="6">6</button>

            <button data-key="7">7</button>
            <button data-key="8">8</button>
            <button data-key="9">9</button>

            <button data-key=".">.</button>
            <button data-key="0">0</button>
            <button data-key="back">⌫</button>
          </div>
        </div>

        <div class="sheet-actions">
          <button id="sheet-save-btn" class="btn btn-primary full">حفظ الرحلة</button>
          <button id="sheet-cancel-btn" class="btn btn-ghost full">إلغاء</button>
        </div>
      </div>
    </div>

    <script src="constants.js"></script>
    <script src="utils.js"></script>
    <script src="app.js" defer></script>
    <script>
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
          navigator.serviceWorker.register("sw.js").catch(() => {});
        });
      }
    </script>
  </body>
</html>
